(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.TiAuth=e()}})(function(){var e,t,n;return function r(e,t,n){function o(u,f){if(!t[u]){if(!e[u]){var a=typeof require=="function"&&require;if(!f&&a)return a(u,!0);if(i)return i(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var l=t[u]={exports:{}};e[u][0].call(l.exports,function(t){var n=e[u][1][t];return o(n?n:t)},l,l.exports,r,e,t,n)}return t[u].exports}var i=typeof require=="function"&&require;for(var u=0;u<n.length;u++)o(n[u]);return o}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});function r(e){return e&&e.__esModule?e:{"default":e}}var o=e("./authentication");var i=r(o);var u="http://portal.travel-intelligence.dev";function f(e,t,n,r){var o=new XMLHttpRequest;o.open(e,u+t,true);o.onreadystatechange=f;o.responseType="json";o.setRequestHeader("Accept","application/json");o.setRequestHeader("Authorization","Token "+i["default"].token());o.send();function f(){if(this.readyState===this.DONE){if(this.status===200){n(this.response)}else{r(this)}}}}n["default"]={get:f.bind(undefined,"GET")};t.exports=n["default"]},{"./authentication":2}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});function r(e){return e&&e.__esModule?e:{"default":e}}var o=e("../ti-auth");var i=r(o);var u=e("./location");var f=r(u);var a=undefined;n["default"]={token:function s(){return a},authorize:function l(){var e=f["default"].parse();a=e.query.auth_token||undefined;if(!a){return false}delete e.query.auth_token;f["default"].replace(e);return true},unauthorize:function c(){a=undefined;f["default"].redirect(i["default"].DASHBOARD_URL+"/authorize")}};t.exports=n["default"]},{"../ti-auth":4,"./location":3}],3:[function(e,t,n){(function(r){"use strict";Object.defineProperty(n,"__esModule",{value:true});function o(e){return e&&e.__esModule?e:{"default":e}}var i=e("url-parse");var u=o(i);n["default"]={parse:function f(){return new u["default"](r.location.href,true)},replace:function a(e){r.history.replaceState({},"",e)},redirect:function s(e){r.location.href=e}};t.exports=n["default"]}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"url-parse":6}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});function r(e){return e&&e.__esModule?e:{"default":e}}var o=e("./lib/authentication");var i=r(o);var u=e("./lib/api");var f=r(u);function a(e){var t=i["default"].token();f["default"].get(l.API_URL+"/api/v1/users/me",e.bind(null,t),i["default"].unauthorize)}function s(){if(l.API_URL===""){throw new Error("`TiAuth.API_URL` needs to be configured.")}if(l.DASHBOARD_URL===""){throw new Error("`TiAuth.DASHBOARD_URL` needs to be configured.")}}var l={API_URL:"",DASHBOARD_URL:"",initialize:function c(e){s();if(!i["default"].authorize()){i["default"].unauthorize();return}a(e)},signout:function d(){i["default"].unauthorize()}};n["default"]=l;t.exports=n["default"]},{"./lib/api":1,"./lib/authentication":2}],5:[function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function o(e){var t=/([^=?&]+)=([^&]*)/g,n={},r;for(;r=t.exec(e);n[decodeURIComponent(r[1])]=decodeURIComponent(r[2]));return n}function i(e,t){t=t||"";var n=[];if("string"!==typeof t)t="?";for(var o in e){if(r.call(e,o)){n.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]))}}return n.length?t+n.join("&"):""}n.stringify=i;n.parse=o},{}],6:[function(e,t,n){"use strict";var r=e("requires-port"),o=e("./lolcation"),i=e("querystringify"),u=/^\/(?!\/)/;var f=[["#","hash"],["?","query"],["//","protocol",2,1,1],["/","pathname"],["@","auth",1],[NaN,"host",undefined,1,1],[/\:(\d+)$/,"port"],[NaN,"hostname",undefined,1,1]];function a(e,t,n){if(!(this instanceof a)){return new a(e,t,n)}var s=u.test(e),l,c,d,p,h=typeof t,y=this,v=0;if("object"!==h&&"string"!==h){n=t;t=null}if(n&&"function"!==typeof n){n=i.parse}t=o(t);for(;v<f.length;v++){c=f[v];l=c[0];p=c[1];if(l!==l){y[p]=e}else if("string"===typeof l){if(~(d=e.indexOf(l))){if("number"===typeof c[2]){y[p]=e.slice(0,d);e=e.slice(d+c[2])}else{y[p]=e.slice(d);e=e.slice(0,d)}}}else if(d=l.exec(e)){y[p]=d[1];e=e.slice(0,e.length-d[0].length)}y[p]=y[p]||(c[3]||"port"===p&&s?t[p]||"":"");if(c[4]){y[p]=y[p].toLowerCase()}}if(n)y.query=n(y.query);if(!r(y.port,y.protocol)){y.host=y.hostname;y.port=""}y.username=y.password="";if(y.auth){c=y.auth.split(":");y.username=c[0]||"";y.password=c[1]||""}y.href=y.toString()}a.prototype.set=function s(e,t,n){var o=this;if("query"===e){if("string"===typeof t&&t.length){t=(n||i.parse)(t)}o[e]=t}else if("port"===e){o[e]=t;if(!r(t,o.protocol)){o.host=o.hostname;o[e]=""}else if(t){o.host=o.hostname+":"+t}}else if("hostname"===e){o[e]=t;if(o.port)t+=":"+o.port;o.host=t}else if("host"===e){o[e]=t;if(/\:\d+/.test(t)){t=t.split(":");o.hostname=t[0];o.port=t[1]}}else{o[e]=t}o.href=o.toString();return o};a.prototype.toString=function l(e){if(!e||"function"!==typeof e)e=i.stringify;var t,n=this,r=n.protocol+"//";if(n.username){r+=n.username;if(n.password)r+=":"+n.password;r+="@"}r+=n.hostname;if(n.port)r+=":"+n.port;r+=n.pathname;t="object"===typeof n.query?e(n.query):n.query;if(t)r+="?"!==t.charAt(0)?"?"+t:t;if(n.hash)r+=n.hash;return r};a.qs=i;a.location=o;t.exports=a},{"./lolcation":7,querystringify:5,"requires-port":8}],7:[function(e,t,n){(function(n){"use strict";var r={hash:1,query:1},o;t.exports=function i(t){t=t||n.location||{};o=o||e("./");var i={},u=typeof t,f;if("blob:"===t.protocol){i=new o(unescape(t.pathname),{})}else if("string"===u){i=new o(t,{});for(f in r)delete i[f]}else if("object"===u)for(f in t){if(f in r)continue;i[f]=t[f]}return i}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./":6}],8:[function(e,t,n){"use strict";t.exports=function r(e,t){t=t.split(":")[0];e=+e;if(!e)return false;switch(t){case"http":case"ws":return e!==80;case"https":case"wss":return e!==443;case"ftp":return e!==21;case"gopher":return e!==70;case"file":return false}return e!==0}},{}]},{},[4])(4)});
//# sourceMappingURL=dist/ti-auth.min.js.source